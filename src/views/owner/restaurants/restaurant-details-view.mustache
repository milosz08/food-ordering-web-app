<div class="modal fade" id="delete-res-modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">Usuwanie restauracji</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Czy na pewno chcesz usunąć restaurację:</p>
        <ul class="list-group list-group-flush">
          <li class="list-group-item">Nazwa restauracji: <strong>{{data.details.name}}</strong></li>
          <li class="list-group-item">Adres: <strong>{{data.details.address}}</strong></li>
          <li class="list-group-item">
            Status: <strong class="{{data.details.status.color_bts}}">{{data.details.status.text}}</strong>
          </li>
        </ul>
        <p class="mt-3">
          Po usunięciu restauracji dodane przez Ciebie potrawy skojarzone z tą restauracją również ulegną usunięciu. Operacji
          usunięcia restauracji nie można cofnąć.
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Zamknij</button>
        <a class="btn btn-outline-danger" href="{{base_dir}}owner/restaurants/delete-restaurant?id={{data.details.id}}">Usuń</a>
      </div>
    </div>
  </div>
</div>
<div class="position-relative min-z-index">
  <div class="d-flex align-items-center">
    <div class="me-4">
      <img src="{{base_dir}}public/{{data.details.profile_url}}" alt="" class="rounded" width="80px" height="80px"/>
    </div>
    <div>
      <h2 class="mb-3 text-secondary fw-normal">Szczegóły restauracji <span class="text-primary">#{{data.details.id}}</span></h2>
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb mb-0">
          <li class="breadcrumb-item"><a href="{{base_dir}}owner/dashboard">Panel główny</a></li>
          <li class="breadcrumb-item"><a href="{{base_dir}}owner/restaurants">Moje restauracje</a></li>
          <li class="breadcrumb-item active" aria-current="page">Szczegóły restauracji #{{data.details.id}}</li>
        </ol>
      </nav>
    </div>
  </div>
  <hr class="mb-3"/>
  {{> partials/dynamic-banner-view.partial}}
  <div class="row mb-4 px-3 gap-2 mb-2">
    <div class="col-auto px-0">
      <a href="{{base_dir}}owner/restaurants/edit-restaurant?id={{data.details.id}}" class="btn btn-primary">Edytuj restaurację</a>
    </div>
    <div class="col-auto px-0">
      <a href="{{base_dir}}owner/ratings?restaurant={{data.details.id}}" class="btn btn-success">Oceny restauracji</a>
    </div>
    <div class="col-auto px-0">
      <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#delete-res-modal">
        Usuń restaurację
      </button>
    </div>
  </div>
  <div class="container-fluid mb-5">
    <div class="row">
      <div class="col-md-12">
        <div class="row mb-2">
          <div class="col-md-4">
            <p class="text-secondary lh-sm mb-1">Nazwa restauracji:</p>
            <p class="text-dark fs-5 lh-sm">{{data.details.name}}</p>
          </div>
          <div class="col-md-4">
            <p class="text-secondary lh-sm mb-1">Imię i nazwisko właściciela:</p>
            <p class="text-dark fs-5 lh-sm">{{data.details.full_name}}</p>
          </div>
          <div class="col-md-4">
            <p class="text-secondary lh-sm mb-1">Cena za dostawę:</p>
            <p class="text-dark fs-5 lh-sm">{{data.details.delivery_price}}</p>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-md-4">
            <p class="text-secondary lh-sm mb-1">Ulica restauracji:</p>
            <p class="text-dark fs-5 lh-sm">{{data.details.street}}</p>
          </div>
          <div class="col-md-4">
            <p class="text-secondary lh-sm mb-1">Numer lokalu restauracji:</p>
            <p class="text-dark fs-5 lh-sm">{{data.details.building_locale_nr}}</p>
          </div>
          <div class="col-md-4">
            <div class="d-flex align-items-center mb-1">
              <p class="text-secondary lh-sm mb-0">Minimalna cena zamówienia:</p>
              <i type="button" class="bi bi-info-circle mt-1 ms-2" data-bs-toggle="tooltip" data-bs-placement="bottom"
                 data-bs-title="Minimalna cena wszystkich produktów nie wliczając kosztów dostawy.">
              </i>
            </div>
            <p class="text-dark fs-5 lh-sm">{{data.details.min_price}}</p>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-md-4">
            <p class="text-secondary lh-sm mb-1">Liczba potraw przypisanych do restauracji:</p>
            <p class="text-dark fs-5 lh-sm">{{data.details.count_of_dishes}}</p>
          </div>
          <div class="col-md-4">
            <p class="text-secondary lh-sm mb-1">Kod pocztowy miejscowości restauracji:</p>
            <p class="text-dark fs-5 lh-sm">{{data.details.post_code}}</p>
          </div>
          <div class="col-md-4">
            <p class="text-secondary lh-sm mb-1">Miejscowość restauracji:</p>
            <p class="text-dark fs-5 lh-sm">{{data.details.city}}</p>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-md-4">
            <p class="text-secondary lh-sm mb-1">Ilość oferowanych rabatów:</p>
            <p class="text-dark fs-5 lh-sm">{{data.details.discounts_count}}</p>
          </div>
          <div class="col-md-4">
            <p class="text-secondary lh-sm mb-1">Status restauracji:</p>
            <p class="{{data.details.status.color_bts}} fs-5 lh-sm">{{data.details.status.text}}</p>
          </div>
          <div class="col-md-4">
            <p class="text-secondary lh-sm mb-1">Numer telefonu:</p>
            <p class="text-dark fs-5 lh-sm">+48 {{data.details.phone_number}}</p>
          </div>
        </div>
      </div>
      <div class="col-md-4 mb-4">
        <p class="text-secondary lh-sm mb-2">Restauracja czynna w dniach i godzinach:</p>
        {{#data.res_hours}}
          <div class="row mb-2 mb-xl-0">
            <div class="col-3">
              <p class="text-dark text-capitalize fs-5 lh-sm mb-1">{{day_of_week}}:</p>
            </div>
            <div class="col-9">
              <p class="text-dark fs-5 lh-sm mb-1">{{status}}</p>
            </div>
          </div>
        {{/data.res_hours}}
      </div>
      <div class="col-md-8">
        <p class="text-secondary lh-sm mb-1">Opis restauracji:</p>
        <p class="text-dark fs-5 lh-sm text-wrap">{{data.details.description}}</p>
      </div>
    </div>
  </div>
</div>
<h3 class="text-secondary fw-normal mb-3">Potrawy restauracji <span class="text-primary">#{{data.details.id}}</span></h3>
<hr/>
{{^data.details.add_button_class}}
  <div class="container-fluid px-0">
    <div class="row justify-content-between align-items-center">
      <form class="col-lg-4 mb-3 d-flex" action="" method="post">
        <input type="search" name="search-dish-name" placeholder="Szukaj po nazwie" class="form-control" value="{{data.search_text}}">
        <button type="submit" name="search-dish-button" class="btn btn-primary btn-md ms-2 py-2">
          <i class="bi bi-search"></i>
        </button>
      </form>
      <div class="col-lg-3 mb-3 d-flex justify-content-end">
        <a href="{{base_url}}owner/dishes/add-dish?resid={{data.details.id}}"
        class="btn btn-primary add-content-button d-flex align-items-center">
        <span class="material-symbols-outlined me-2 fs-5">add</span>Dodaj potrawę
        </a>
      </div>
    </div>
  </div>
{{/data.details.add_button_class}}
{{#data.not_empty}}
  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead>
      <tr>
        <th>Lp</th>
        <th>Nazwa potrawy</th>
        <th>Typ potrawy</th>
        <th class="d-none d-lg-table-cell table-fixed-size">Opis</th>
        <th>Cena</th>
        <th class="fit">Akcja</th>
      </tr>
      </thead>
      <tbody>
      {{#data.restaurant_dishes}}
        <tr>
          <td class="align-middle">{{it}}</td>
          <td class="align-middle">{{name}}</td>
          <td class="align-middle">{{type}}</td>
          <td class="align-middle d-none d-lg-table-cell table-fixed-size text-truncate" title="{{description}}">
            {{description}}
          </td>
          <td class="align-middle">{{price}}</td>
          <td class="align-middle fit flex-nowrap">
            <a href="{{base_dir}}owner/dishes/edit-dish?resid={{data.details.id}}&dishid={{id}}" class="btn btn-primary btn-sm"
            type="button">
            Edytuj
            </a>
            <button class="btn btn-danger btn-sm ms-2" data-bs-toggle="modal" data-bs-target="#delete-dish-modal-{{id}}">
                        <span data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="Usuń potrawę" type="button">
                            <i class="bi bi-x-lg"></i>
                        </span>
            </button>
            <a href="{{base_dir}}owner/dishes/dish-details?resid={{data.details.id}}&dishid={{id}}" class="btn btn-primary btn-sm ms-2"
            type="button" data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="Szczegóły potrawy">
            <i class="bi bi-arrow-right"></i>
            </a>
          </td>
        </tr>
        <div class="modal fade" id="delete-dish-modal-{{id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
             aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h1 class="modal-title fs-5" id="staticBackdropLabel">Usuwanie potrawy</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <p>Czy na pewno chcesz usunąć wybraną potrawę:</p>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item">Nazwa potrawy: <strong>{{name}}</strong></li>
                  <li class="list-group-item">Typ potrawy: <strong>{{type}}</strong></li>
                  <li class="list-group-item">Opis: <strong>{{description}}</strong></li>
                </ul>
                <p class="mt-3">Wybrana potrawa zostanie usunięta jedynie z wybranej restauracji. Operacji nie można cofnąć.</p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Zamknij</button>
                <a class="btn btn-outline-danger" href="{{base_dir}}owner/dishes/delete-dish?resid={{data.details.id}}&dishid={{id}}">
                Usuń
                </a>
              </div>
            </div>
          </div>
        </div>
      {{/data.restaurant_dishes}}
      </tbody>
    </table>
  </div>
  {{> partials/pagination-view.partial}}
{{/data.not_empty}}
{{^data.not_empty}}
  {{#data.details.add_button_class}}
    <div class="container-fluid px-0">
      <div class="row justify-content-end align-items-center">
        <div class="col-lg-3 mb-3 d-flex justify-content-end">
          <a href="{{base_url}}owner/restaurants/restaurant-details?id={{data.details.id}}"
          class="btn btn-primary add-content-button d-flex align-items-center {{data.details.add_button_class}}">
          <span class="material-symbols-outlined me-2 fs-5">add</span>Dodaj potrawę
          </a>
        </div>
      </div>
    </div>
    <div class="alert alert-warning mb-3" role="alert">
      Wybrana restauracja nie została jeszcze zaakceptowana. Nowe potrawy do restauracji możesz dodawać tylko wówczas, jeśli
      restauracja ma status "aktywna".
    </div>
  {{/data.details.add_button_class}}
  {{^data.details.add_button_class}}
    <div class="alert alert-warning mb-3" role="alert">
      Nie znaleziono żadnych potraw przypisanych do zaakceptowanej restauracji. Aby dodać potrawę do restauracji, kliknij "Dodaj potrawę"
      lub w <a class="alert-link" href="{{base_dir}}owner/dishes/add-dish?resid={{data.details.id}}">ten link</a>, który przeniesie Cię do
      strony dodawania potraw.
    </div>
  {{/data.details.add_button_class}}
{{/data.not_empty}}
<h3 class="text-secondary fw-normal mb-3 mt-5">Kody rabatowe restauracji <span class="text-primary">#{{data.details.id}}</span></h3>
<hr/>
{{^data.details.add_button_class}}
  <div class="container-fluid px-0">
    <div class="row justify-content-between align-items-center">
      <form class="col-lg-4 mb-3 d-flex" action="" method="post">
        <input type="search" name="search-discount-code" placeholder="Szukaj po kodzie" class="form-control" value="{{data.search_code}}">
        <button type="submit" name="search-dish-button" class="btn btn-primary btn-md ms-2 py-2">
          <i class="bi bi-search"></i>
        </button>
      </form>
      <div class="col-lg-3 mb-3 d-flex justify-content-end">
        <a href="{{base_url}}owner/discounts/add-discount?resid={{data.details.id}}"
        class="btn btn-primary add-content-button d-flex align-items-center">
        <span class="material-symbols-outlined me-2 fs-5">add</span>Dodaj kod rabatowy
        </a>
      </div>
    </div>
  </div>
{{/data.details.add_button_class}}
{{#data.discounts_not_empty}}
  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead>
      <tr>
        <th>Lp</th>
        <th>Kod rabatowy</th>
        <th>Procent obniżania</th>
        <th class="d-none d-lg-table-cell table-fixed-size">Opis</th>
        <th>Użycia</th>
        <th>Wygaśnięcie</th>
        <th>Status</th>
        <th class="fit">Akcja</th>
      </tr>
      </thead>
      <tbody>
      {{#data.res_discounts}}
        <tr>
          <td class="align-middle">{{it}}</td>
          <td class="align-middle">{{hide_code}}</td>
          <td class="align-middle">{{percentage_discount}}</td>
          <td class="align-middle d-none d-lg-table-cell table-fixed-size text-truncate" title="{{description}}">
            {{description}}
          </td>
          <td class="align-middle">{{total_usages}}</td>
          <td class="align-middle">{{expired_date}}</td>
          <td class="align-middle {{expired_bts_class}}">{{status}}</td>
          <td class="align-middle fit flex-nowrap">
            <a href="{{base_dir}}owner/discounts/edit-discount?id={{id}}&resid={{data.details.id}}" class="btn btn-primary btn-sm"
            type="button">
            Edytuj
            </a>
            <button class="btn btn-danger btn-sm ms-2" data-bs-toggle="modal" data-bs-target="#delete-discount-modal-{{id}}">
                        <span data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="Usuń kod rabatowy" type="button">
                            <i class="bi bi-x-lg"></i>
                        </span>
            </button>
            <button class="btn btn-primary btn-sm ms-2" data-bs-toggle="modal" data-bs-target="#discount-details-modal-{{id}}">
                        <span data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="Szczegóły kodu rabatowego" type="button">
                            <i class="bi bi-arrow-right"></i>
                        </span>
            </button>
          </td>
        </tr>
        {{> partials/delete-discount-code-view.partial}}
        {{> partials/discount-code-details-view.partial}}
      {{/data.res_discounts}}
      </tbody>
    </table>
  </div>
{{/data.discounts_not_empty}}
{{^data.discounts_not_empty}}
  {{#data.details.add_button_class}}
    <div class="container-fluid px-0">
      <div class="row justify-content-end align-items-center">
        <div class="col-lg-3 mb-3 d-flex justify-content-end">
          <a href="{{base_url}}owner/dishes/add-dish?resid={{data.details.id}}"
          class="btn btn-primary add-content-button d-flex align-items-center {{data.details.add_button_class}}">
          <span class="material-symbols-outlined me-2 fs-5">add</span>Dodaj kod rabatowy
          </a>
        </div>
      </div>
    </div>
    <div class="alert alert-warning mb-3" role="alert">
      Wybrana restauracja nie została jeszcze zaakceptowana. Nowe kody rabatowe do restauracji możesz dodawać tylko wówczas, jeśli
      restauracja ma status "aktywna".
    </div>
  {{/data.details.add_button_class}}
  {{^data.details.add_button_class}}
    <div class="alert alert-warning mb-3" role="alert">
      Nie znaleziono żadnych kodów rabatowych przypisanych do zaakceptowanej restauracji. Aby dodać kod rabatowy do restauracji, kliknij
      przycisk "Dodaj kod rabatowy" lub w <a class="alert-link" href="{{base_dir}}owner/discounts/add-discount?resid={{data.details.id}}">
      ten link</a>, który przeniesie Cię do strony dodawania kodów rabatowych.
    </div>
  {{/data.details.add_button_class}}
{{/data.discounts_not_empty}}

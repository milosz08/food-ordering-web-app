<div class="modal fade" id="delete-res-modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="staticBackdropLabel">Usuwanie restauracji</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form action="{{base_dir}}admin/restaurants/delete-restaurant?id={{data.details.id}}" method="post">
                <div class="modal-body">
                    <p>Czy napewno chcesz usunąć restaurację:</p>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">Nazwa restauracji: <strong>{{data.details.name}}</strong></li>
                        <li class="list-group-item">Adres: <strong>{{data.details.address}}</strong></li>
                        <li class="list-group-item">
                            Status: <strong class="{{data.details.status.color_bts}}">{{data.details.status.text}}</strong>
                        </li>
                    </ul>
                    <p class="mt-3 lh-sm">
                        Po usunięciu restauracji, dodane przez właściciela restauracji potrawy skojarzone z tą restauracją również ulegną
                        usunięciu oraz wyłana zostanie poniższa wiadomość. Operacji usunięcia restauracji nie można cofnąć.
                    </p>
                    <div class="mb-2">
                        <label for="form-delete-restaurant-comment" class="form-label">Komentarz wysyłany na adres email:</label>
                        <textarea name="delete-restaurant-comment" class="form-control" maxlength="350" minlength="20" rows="4" 
                            placeholder="Dodatowy komentarz, maksymalnie 350 znaków." id="form-delete-restaurant-comment" required
                        ></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Zamknij</button>
                    <button type="submit" class="btn btn-outline-danger">Usuń</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="modal fade" id="delete-profile-res-modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="staticBackdropLabel">Usuwanie zdjęcia profilowego</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form action="{{base_dir}}admin/restaurants/delete-profile-image?id={{data.details.id}}" method="post">
                <div class="modal-body">
                    <p class="lh-sm">
                        Czy napewno chcesz usunąć zdjęcie profilowe wybranej restauracji? Dodatkowo na adres email właścicela restauracji 
                        zostanie wysłana poniża wiadomość.
                    </p>
                    <div class="mb-2">
                        <label for="form-delete-profile-comment" class="form-label">Komentarz wysyłany na adres email:</label>
                        <textarea name="delete-restaurant-profile-comment" class="form-control" maxlength="350" minlength="20" rows="4" 
                            placeholder="Dodatowy komentarz, maksymalnie 350 znaków." id="form-delete-profile-comment" required
                        ></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Zamknij</button>
                    <button type="submit" class="btn btn-outline-danger">Usuń</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="modal fade" id="delete-banner-res-modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="staticBackdropLabel">Usuwanie zdjęcia w tle</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form action="{{base_dir}}admin/restaurants/delete-banner-image?id={{data.details.id}}" method="post">
                <div class="modal-body">
                    <p class="lh-sm">
                        Czy napewno chcesz usunąć zdjęcie w tle wybranej restauracji? Dodatkowo na adres email właścicela restauracji 
                        zostanie wysłana poniża wiadomość.
                    </p>
                    <div class="mb-2">
                        <label for="form-delete-banner-comment" class="form-label">Komentarz wysyłany na adres email:</label>
                        <textarea name="delete-restaurant-banner-comment" class="form-control" maxlength="350" minlength="20" rows="4" 
                            placeholder="Dodatowy komentarz, maksymalnie 350 znaków." id="form-delete-banner-comment" required
                        ></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Zamknij</button>
                    <button type="submit" class="btn btn-outline-danger">Usuń</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="position-relative min-z-index">
    <div class="d-flex align-items-center">
        <div class="me-4">
            <img src="{{base_dir}}public/{{data.details.profile_url}}" alt="" class="rounded" width="80px" height="80px"/>
        </div>
        <div>
            <h2 class="mb-3 text-secondary fw-normal">Szczegóły restauracji <span class="text-primary">#{{data.details.id}}</span></h2>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item"><a href="{{base_dir}}admin/dashboard">Panel główny</a></li>
                    <li class="breadcrumb-item"><a href="{{base_dir}}admin/restaurants">Restauracje</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Szczegóły restauracji #{{data.details.id}}</li>
                </ol>
            </nav>
        </div>
    </div>
    <hr class="mb-3"/>
    {{> partials/dynamic-banner-view.partial}}
    <div class="hstack gap-3 mb-4">
        <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#delete-res-modal">
            Usuń restaurację
        </button>
        <button class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#delete-banner-res-modal">
            Usuń zdjęcie w tle
        </button>
        <button class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#delete-profile-res-modal">
            Usuń zdjęcie profile
        </button>
    </div>
    <div class="container-fluid mb-5">
        <div class="row">
            <div class="col-md-12">
                <div class="row mb-2">
                    <div class="col-md-4">
                        <p class="text-secondary lh-sm mb-1">Nazwa restauracji:</p>
                        <p class="text-dark fs-5 lh-sm">{{data.details.name}}</p>
                    </div>
                    <div class="col-md-4">
                        <p class="text-secondary lh-sm mb-1">Imię i nazwisko właściciela:</p>
                        <p class="text-dark fs-5 lh-sm">{{data.details.full_name}}</p>
                    </div>
                    <div class="col-md-4">
                        <p class="text-secondary lh-sm mb-1">Cena za dostawę:</p>
                        <p class="text-dark fs-5 lh-sm">{{data.details.delivery_price}}</p>
                    </div>
                </div>
                <div class="row mb-2">
                    <div class="col-md-4">
                        <p class="text-secondary lh-sm mb-1">Ulica restauracji:</p>
                        <p class="text-dark fs-5 lh-sm">{{data.details.street}}</p>
                    </div>
                    <div class="col-md-4">
                        <p class="text-secondary lh-sm mb-1">Numer lokalu restauracji:</p>
                        <p class="text-dark fs-5 lh-sm">{{data.details.building_locale_nr}}</p>
                    </div>
                    <div class="col-md-4">
                        <div class="d-flex align-items-center mb-1">
                            <p class="text-secondary lh-sm mb-0">Minimalna cena zamówienia:</p>
                            <i type="button" class="bi bi-info-circle mt-1 ms-2" data-bs-toggle="tooltip" data-bs-placement="bottom" 
                                data-bs-title="Minimalna cena wszystkich produktów nie wliczając kosztów dostawy.">
                            </i>
                        </div>
                        <p class="text-dark fs-5 lh-sm">{{data.details.min_price}}</p>
                    </div>
                </div>
                <div class="row mb-2">
                    <div class="col-md-4">
                        <p class="text-secondary lh-sm mb-1">Liczba potraw przypisanych do restauracji:</p>
                        <p class="text-dark fs-5 lh-sm">{{data.details.count_of_dishes}}</p>
                    </div>
                    <div class="col-md-4">
                        <p class="text-secondary lh-sm mb-1">Kod pocztowy miejscowości restauracji:</p>
                        <p class="text-dark fs-5 lh-sm">{{data.details.post_code}}</p>
                    </div>
                    <div class="col-md-4">
                        <p class="text-secondary lh-sm mb-1">Miejscowość restauracji:</p>
                        <p class="text-dark fs-5 lh-sm">{{data.details.city}}</p>
                    </div>
                </div>
                <div class="row mb-2">
                    <div class="col-md-4">
                        <p class="text-secondary lh-sm mb-1">Ilość oferowanych rabatów:</p>
                        <p class="text-dark fs-5 lh-sm">{{data.details.discounts_count}}</p>
                    </div>
                    <div class="col-md-4">
                        <p class="text-secondary lh-sm mb-1">Status restauracji:</p>
                        <p class="{{data.details.status.color_bts}} fs-5 lh-sm">{{data.details.status.text}}</p>
                    </div>
                    <div class="col-md-4">
                        <p class="text-secondary lh-sm mb-1">Numer telefonu:</p>
                        <p class="text-dark fs-5 lh-sm">+48 {{data.details.phone_number}}</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <p class="text-secondary lh-sm mb-2">Restauracja czynna w dniach i godzinach:</p>
                {{#data.res_hours}}
                    <div class="row mb-2 mb-xl-0">
                        <div class="col-3">
                            <p class="text-dark text-capitalize fs-5 lh-sm mb-1">{{day_of_week}}:</p>
                        </div>
                        <div class="col-9">
                            <p class="text-dark fs-5 lh-sm mb-1">{{status}}</p>
                        </div>
                    </div>
                {{/data.res_hours}}
            </div>
            <div class="col-md-8">
                <p class="text-secondary lh-sm mb-1">Opis restauracji:</p>
                <p class="text-dark fs-5 lh-sm text-wrap">{{data.details.description}}</p>
            </div>
        </div>
    </div>
</div>
<h3 class="text-secondary fw-normal mb-3">Potrawy restauracji <span class="text-primary">#{{data.details.id}}</span></h3>
<hr/>
<div class="container-fluid px-0">
    <div class="row justify-content-between align-items-center">
        <form class="col-lg-4 mb-3 d-flex" action="" method="post">
            <input type="search" name="search-dish-name" placeholder="Szukaj po nazwie" class="form-control" value="{{data.search_text}}">
            <button type="submit" name="search-dish-button" class="btn btn-primary btn-md ms-2 py-2">
                <i class="bi bi-search"></i>
            </button>
        </form>
    </div>
</div>
{{#data.not_empty}}
<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Lp</th>
                <th>Nazwa potrawy</th>
                <th>Typ potrawy</th>
                <th class="d-none d-lg-table-cell table-fixed-size">Opis</th>
                <th>Cena</th>
                <th class="fit">Akcja</th>
            </tr>
        </thead>
        <tbody>
            {{#data.restaurant_dishes}}
            <tr>
                <td class="align-middle">{{it}}</td>
                <td class="align-middle">{{name}}</td>
                <td class="align-middle">{{type}}</td>
                <td class="align-middle d-none d-lg-table-cell table-fixed-size text-truncate" title="{{description}}">
                    {{description}}
                </td>
                <td class="align-middle">{{price}}</td>
                <td class="align-middle fit flex-nowrap">
                    <button class="btn btn-danger btn-sm ms-2" data-bs-toggle="modal" data-bs-target="#delete-dish-modal-{{id}}">
                        <span data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="Usuń potrawę" type="button">
                            <i class="bi bi-x-lg"></i>
                        </span>
                    </button>
                    <a href="{{base_dir}}admin/dishes/dish-details?resid={{data.details.id}}&dishid={{id}}" class="btn btn-primary btn-sm ms-2" 
                        type="button" data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="Szczegóły potrawy">
                        <i class="bi bi-arrow-right"></i>
                    </a>
                </td>
            </tr>
            <div class="modal fade" id="delete-dish-modal-{{id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="staticBackdropLabel">Usuwanie potrawy</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form action="{{base_dir}}admin/dishes/delete-dish?resid={{data.details.id}}&dishid={{id}}" method="post">
                            <div class="modal-body">
                                <p>Czy napewno chcesz usunąć wybraną potrawę:</p>
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item">Nazwa potrawy: <strong>{{name}}</strong></li>
                                    <li class="list-group-item">Typ potrawy: <strong>{{type}}</strong></li>
                                    <li class="list-group-item">Opis: <strong>{{description}}</strong></li>
                                </ul>
                                <p class="mt-3 lh-sm">
                                    Wybrana potrawa zostanie usunięta jedynie z wybranej restauracji. Operacji nie można cofnąć. Dodatkowo na
                                    adres email właścicela restauracji zostanie wysłana poniższa wiadomość.
                                </p>
                                <div class="mb-2">
                                    <label for="form-delete-dish-comment" class="form-label">Komentarz wysyłany na adres email:</label>
                                    <textarea name="delete-dish-comment" class="form-control" maxlength="350" minlength="20" rows="4" 
                                        placeholder="Dodatowy komentarz, maksymalnie 350 znaków." id="form-delete-dish-comment" required
                                    ></textarea>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Zamknij</button>
                                <button type="submit" class="btn btn-outline-danger">Usuń</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            {{/data.restaurant_dishes}}
        </tbody>
    </table>
</div>
{{> partials/pagination-view.partial}}
{{/data.not_empty}}
{{^data.not_empty}}
<div class="alert alert-warning mb-3" role="alert">
    Wybrana restauracja nie posiada w swojej ofercie żadnych potraw.
</div>
{{/data.not_empty}}
